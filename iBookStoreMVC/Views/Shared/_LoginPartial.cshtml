@using iBookStoreMVC.Service
@using iBookStoreMVC.ViewModels
@using Microsoft.AspNetCore.Identity
@inject IIdentityParser<ApplicationUser> UserManager

@if (User.FindFirst(x => x.Type == "preferred_username") != null) {
    <section class="col-4">
        <div class="identity-container">
            <div class="identity-name">Hello, @User.FindFirst(x => x.Type == "preferred_username").Value</div>
        </div>
    </section>

    <section class="col-2">
        @await Component.InvokeAsync("Cart", new { user = UserManager.Parse(User) })
    </section>
} else {
    <section class="col-4">
        <div class="identity-container">
            <a asp-area="" asp-controller="Account" asp-action="SignIn">
                Login
            </a>
        </div>
    </section>
}